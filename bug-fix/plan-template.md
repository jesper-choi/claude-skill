# Bug Fix Plan: [Bug Title]

**Status**: 🔄 In Progress
**Reported**: YYYY-MM-DD
**Started**: YYYY-MM-DD
**Fixed**: YYYY-MM-DD
**Severity**: 🔴 Critical | 🟠 High | 🟡 Medium | 🟢 Low

---

## ⚠️ CRITICAL: 버그 수정 원칙

> **🧠 핵심**: 추측하지 말고 확인하라. 증상이 아닌 원인을 해결하라.

### 필수 준수 사항
1. 🔍 **재현 우선**: 버그를 먼저 재현
2. 🧪 **테스트 캡처**: 버그를 테스트로 캡처
3. 🎯 **근본 원인**: 증상이 아닌 원인 해결
4. ✂️ **최소 변경**: 필요한 최소한만 수정
5. ✅ **회귀 방지**: 기존 테스트 100% 유지

### 수정 절차
1. 버그 재현 → 2. 정보 수집 → 3. 근본 원인 분석 → 4. 테스트 작성 → 5. 수정 → 6. 검증

⛔ **재현 없이 수정 시도 금지**
⛔ **테스트 없이 수정 완료 금지**

---

## 🐛 Bug Description

### 증상 (What)
[사용자가 경험하는 문제 현상]

### 재현 단계 (How to Reproduce)
1. [Step 1]
2. [Step 2]
3. [Step 3]
4. 결과: [실제 결과]

### 기대 동작 (Expected)
[정상적으로 동작해야 하는 방식]

### 실제 동작 (Actual)
[현재 잘못된 동작]

### 영향 범위 (Impact)
- **영향받는 사용자**: [범위]
- **영향받는 기능**: [기능 목록]
- **발생 빈도**: [항상/가끔/특정 조건]

---

## 📊 수집한 정보

### 에러 정보
```
[에러 메시지]
```

### 스택 트레이스
```
[스택 트레이스]
```

### 관련 로그
```
[관련 로그]
```

### 환경 정보
| 항목 | 값 |
|------|---|
| 환경 | Dev/Staging/Production |
| 브라우저/클라이언트 | [정보] |
| OS | [정보] |
| 버전 | [정보] |

### 입력 데이터
```
[버그를 유발한 입력 데이터]
```

---

## 🔍 코드 분석

### 분석한 파일
| 파일 경로 | 분석 내용 | 관련성 |
|----------|----------|--------|
| `path/to/file1` | [분석 내용] | 🔴 직접 관련 |
| `path/to/file2` | [분석 내용] | 🟡 간접 관련 |

### 실행 흐름 추적
```
1. [시작점]
   ↓
2. [중간 단계]
   ↓
3. [문제 발생 지점] ← 여기서 버그 발생
   ↓
4. [증상 발현]
```

### 의심 지점
| 위치 | 의심 이유 | 검증 결과 |
|------|----------|----------|
| `file:line` | [왜 의심하는지] | ✅ 원인 / ❌ 아님 |

---

## 🎯 근본 원인 분석 (Root Cause Analysis)

### 5 Whys 분석
```
버그 증상: [증상]

Why 1: 왜 [증상]이 발생하는가?
→ [답변 1]

Why 2: 왜 [답변 1]인가?
→ [답변 2]

Why 3: 왜 [답변 2]인가?
→ [답변 3]

Why 4: 왜 [답변 3]인가?
→ [답변 4]

Why 5: 왜 [답변 4]인가?
→ [근본 원인] ← ROOT CAUSE
```

### 근본 원인 (확정)
```
[근본 원인에 대한 명확한 설명]

문제 코드:
[문제가 되는 코드 스니펫]

왜 문제인가:
[문제인 이유]
```

### 수정 방향
```
[어떻게 수정할 것인지]

수정 후 코드:
[수정된 코드 스니펫]

왜 이것이 해결책인가:
[이 수정이 문제를 해결하는 이유]
```

---

## 🧪 Test Strategy

### 버그 캡처 테스트
```python
# tests/test_bug_[issue_number].py

def test_bug_[description]():
    """
    Bug: [버그 설명]
    Root Cause: [근본 원인]
    """
    # Arrange: 버그 재현 조건 설정
    [setup code]
    
    # Act: 버그 유발 동작
    [action code]
    
    # Assert: 올바른 동작 확인
    [assertion code]
```

### 테스트 계획
- [ ] **버그 캡처 테스트**: 이 버그를 정확히 재현하는 테스트
- [ ] **경계 조건 테스트**: 유사한 경계 조건 테스트
- [ ] **회귀 테스트**: 기존 테스트 모두 통과

---

## 🚀 Fix Implementation

### Phase 1: 재현 & 분석
**Goal**: 버그 재현 및 근본 원인 파악
**Status**: ⏳ Pending | 🔄 In Progress | ✅ Complete

#### Tasks
- [ ] **Task 1.1**: 버그 재현
  - 재현 성공 여부: ⏳
  - 재현 조건: [조건]

- [ ] **Task 1.2**: 정보 수집
  - 에러 메시지: ⏳
  - 스택 트레이스: ⏳
  - 관련 로그: ⏳

- [ ] **Task 1.3**: 코드 분석
  - 분석한 파일: [파일 목록]
  - 실행 흐름 추적: ⏳

- [ ] **Task 1.4**: 근본 원인 확정
  - 근본 원인: [원인]
  - 확신도: High/Medium/Low

#### ✋ Phase 1 Gate
- [ ] 버그 재현 성공
- [ ] 근본 원인 확정
- [ ] 수정 방향 결정

---

### Phase 2: 테스트 & 수정
**Goal**: 테스트로 버그 캡처 후 수정
**Status**: ⏳ Pending | 🔄 In Progress | ✅ Complete

#### Tasks
- [ ] **Task 2.1**: 버그 캡처 테스트 작성
  - File: `tests/[path]/test_bug_[name].py`
  - Expected: 테스트 FAIL (버그 재현)

- [ ] **Task 2.2**: 테스트 실행 → FAIL 확인
  ```bash
  [테스트 실행 명령어]
  ```
  - 결과: ⏳ FAIL 확인

- [ ] **Task 2.3**: 최소 수정 적용
  - File: `[수정할 파일]`
  - 변경 내용: [변경 설명]
  - 변경 라인 수: [최소화]

- [ ] **Task 2.4**: 테스트 실행 → PASS 확인
  ```bash
  [테스트 실행 명령어]
  ```
  - 결과: ⏳ PASS 확인

#### ✋ Phase 2 Gate
- [ ] 버그 캡처 테스트 PASS
- [ ] 기존 테스트 100% PASS
- [ ] 수정이 최소한인가 확인

---

### Phase 3: 검증 & 완료
**Goal**: 수동 검증 및 유사 버그 검토
**Status**: ⏳ Pending | 🔄 In Progress | ✅ Complete

#### Tasks
- [ ] **Task 3.1**: 수동 검증
  - 원래 재현 단계로 테스트: ⏳
  - 버그 해결 확인: ⏳

- [ ] **Task 3.2**: 관련 기능 테스트
  - 영향받는 기능 테스트: ⏳
  - 부수효과 없음 확인: ⏳

- [ ] **Task 3.3**: 유사 버그 검토
  - 같은 패턴이 다른 곳에 있는가? [있음/없음]
  - 추가 수정 필요: [있음/없음]

- [ ] **Task 3.4**: 문서화
  - 버그 원인 기록: ⏳
  - 예방책 기록: ⏳

#### ✋ Phase 3 Gate
- [ ] 수동 검증 완료
- [ ] 유사 버그 검토 완료
- [ ] 문서화 완료

---

## ✋ Final Quality Gate

### 버그 해결 확인
- [ ] **버그 테스트 PASS**: 버그 캡처 테스트 통과
- [ ] **수동 확인**: 원래 증상 해결됨
- [ ] **재현 불가**: 동일 조건에서 버그 재현 안됨

### 회귀 방지
- [ ] **기존 테스트 100% PASS**
- [ ] **관련 기능 정상 동작**
- [ ] **성능 영향 없음**

### 코드 품질
- [ ] **최소 변경**: 필요한 부분만 수정됨
- [ ] **린트 통과**: 코드 스타일 유지
- [ ] **명확한 수정**: 수정 의도가 명확함

### Validation Commands
```bash
# Python/FastAPI (uv)
uv run pytest tests/test_bug_*.py -v  # 버그 테스트
uv run pytest  # 전체 테스트
uv run ruff check .
uv sync  # 의존성 동기화

# TypeScript/React
npm test -- --testPathPattern="bug"  # 버그 테스트
npm test  # 전체 테스트
npm run lint
```

---

## 📝 Notes & Learnings

### 버그 원인 요약
```
[근본 원인 한 줄 요약]
```

### 예방책
- [이런 버그를 예방하려면]
- [추가할 테스트/검증]
- [코드 리뷰 시 확인할 점]

### 유사 버그 가능성
- [같은 패턴이 있는 다른 위치]
- [추가 검토 필요한 부분]

### 배운 점
- [이 버그를 통해 배운 점]

---

## 🔄 Rollback Strategy

### If Fix Causes Issues
- [ ] 수정 커밋 revert
- [ ] 기존 상태 복원
- [ ] 다시 분석 시작

---

## 📊 Progress Tracking

| Phase | Status | Time Spent |
|-------|--------|------------|
| Phase 1: 재현 & 분석 | ⏳ | - |
| Phase 2: 테스트 & 수정 | ⏳ | - |
| Phase 3: 검증 & 완료 | ⏳ | - |

**Total Time**: - 시간

---

**Bug Status**: 🔄 In Progress
**Next Action**: [다음 작업]
**Blocked By**: [현재 블로커] or None
